define(["@grafana/data","@grafana/ui","react","rxjs"],((e,t,r,n)=>(()=>{var o={539:(e,t,r)=>{var n=r(938).Symbol;e.exports=n},349:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},213:(e,t,r)=>{var n=r(701),o=r(900),c=r(785),a=r(854),i=r(383),u=r(519),s=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=c(e),p=!r&&o(e),l=!r&&!p&&a(e),f=!r&&!p&&!l&&u(e),b=r||p||l||f,y=b?n(e.length,String):[],v=y.length;for(var d in e)!t&&!s.call(e,d)||b&&("length"==d||l&&("offset"==d||"parent"==d)||f&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||i(d,v))||y.push(d);return y}},736:(e,t,r)=>{var n=r(539),o=r(840),c=r(258),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):c(e)}},829:(e,t,r)=>{var n=r(736),o=r(360);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},729:(e,t,r)=>{var n=r(338),o=r(678),c=r(611),a=r(532),i=/^\[object .+?Constructor\]$/,u=Function.prototype,s=Object.prototype,p=u.toString,l=s.hasOwnProperty,f=RegExp("^"+p.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!c(e)||o(e))&&(n(e)?f:i).test(a(e))}},972:(e,t,r)=>{var n=r(736),o=r(194),c=r(360),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return c(e)&&o(e.length)&&!!a[n(e)]}},464:(e,t,r)=>{var n=r(611),o=r(16),c=r(586),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return c(e);var t=o(e),r=[];for(var i in e)("constructor"!=i||!t&&a.call(e,i))&&r.push(i);return r}},197:(e,t,r)=>{var n=r(137),o=r(871),c=r(132);e.exports=function(e,t){return c(o(e,t,n),e+"")}},459:(e,t,r)=>{var n=r(551),o=r(630),c=r(137),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:c;e.exports=a},701:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},334:e=>{e.exports=function(e){return function(t){return e(t)}}},937:(e,t,r)=>{var n=r(938)["__core-js_shared__"];e.exports=n},630:(e,t,r)=>{var n=r(822),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},120:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},822:(e,t,r)=>{var n=r(729),o=r(371);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},840:(e,t,r)=>{var n=r(539),o=Object.prototype,c=o.hasOwnProperty,a=o.toString,i=n?n.toStringTag:void 0;e.exports=function(e){var t=c.call(e,i),r=e[i];try{e[i]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[i]=r:delete e[i]),o}},371:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},383:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},535:(e,t,r)=>{var n=r(638),o=r(68),c=r(383),a=r(611);e.exports=function(e,t,r){if(!a(r))return!1;var i=typeof t;return!!("number"==i?o(r)&&c(t,r.length):"string"==i&&t in r)&&n(r[t],e)}},678:(e,t,r)=>{var n,o=r(937),c=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!c&&c in e}},16:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},586:e=>{e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},125:(e,t,r)=>{e=r.nmd(e);var n=r(120),o=t&&!t.nodeType&&t,c=o&&e&&!e.nodeType&&e,a=c&&c.exports===o&&n.process,i=function(){try{return c&&c.require&&c.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=i},258:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},871:(e,t,r)=>{var n=r(349),o=Math.max;e.exports=function(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var c=arguments,a=-1,i=o(c.length-t,0),u=Array(i);++a<i;)u[a]=c[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=c[a];return s[t]=r(u),n(e,this,s)}}},938:(e,t,r)=>{var n=r(120),o="object"==typeof self&&self&&self.Object===Object&&self,c=n||o||Function("return this")();e.exports=c},132:(e,t,r)=>{var n=r(459),o=r(591)(n);e.exports=o},591:e=>{var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var o=t(),c=16-(o-n);if(n=o,c>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},532:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},551:e=>{e.exports=function(e){return function(){return e}}},236:(e,t,r)=>{var n=r(197),o=r(638),c=r(535),a=r(893),i=Object.prototype,u=i.hasOwnProperty,s=n((function(e,t){e=Object(e);var r=-1,n=t.length,s=n>2?t[2]:void 0;for(s&&c(t[0],t[1],s)&&(n=1);++r<n;)for(var p=t[r],l=a(p),f=-1,b=l.length;++f<b;){var y=l[f],v=e[y];(void 0===v||o(v,i[y])&&!u.call(e,y))&&(e[y]=p[y])}return e}));e.exports=s},638:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},137:e=>{e.exports=function(e){return e}},900:(e,t,r)=>{var n=r(829),o=r(360),c=Object.prototype,a=c.hasOwnProperty,i=c.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!i.call(e,"callee")};e.exports=u},785:e=>{var t=Array.isArray;e.exports=t},68:(e,t,r)=>{var n=r(338),o=r(194);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},854:(e,t,r)=>{e=r.nmd(e);var n=r(938),o=r(714),c=t&&!t.nodeType&&t,a=c&&e&&!e.nodeType&&e,i=a&&a.exports===c?n.Buffer:void 0,u=(i?i.isBuffer:void 0)||o;e.exports=u},338:(e,t,r)=>{var n=r(736),o=r(611);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},194:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},611:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},360:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},519:(e,t,r)=>{var n=r(972),o=r(334),c=r(125),a=c&&c.isTypedArray,i=a?o(a):n;e.exports=i},893:(e,t,r)=>{var n=r(213),o=r(464),c=r(68);e.exports=function(e){return c(e)?n(e,!0):o(e)}},714:e=>{e.exports=function(){return!1}},305:t=>{"use strict";t.exports=e},388:e=>{"use strict";e.exports=t},650:e=>{"use strict";e.exports=r},177:e=>{"use strict";e.exports=n}},c={};function a(e){var t=c[e];if(void 0!==t)return t.exports;var r=c[e]={id:e,loaded:!1,exports:{}};return o[e](r,r.exports,a),r.loaded=!0,r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};return(()=>{"use strict";a.r(i),a.d(i,{plugin:()=>w});var e=a(305),t=a(388),r=a(650),n=a.n(r);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){o(e,t,r[t])}))}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const{FormField:s}=t.LegacyForms;class p extends r.PureComponent{render(){const{options:e}=this.props,{jsonData:t}=e;return n().createElement(s,{label:"WebSocket server URL",labelWidth:10,inputWidth:20,onChange:this.onURLChange,value:t.url||""})}constructor(...e){super(...e),o(this,"onURLChange",(e=>{const{onOptionsChange:t,options:r}=this.props,n=u(c({},r.jsonData),{url:e.target.value});t(u(c({},r),{jsonData:n}))}))}}var l=a(236),f=a.n(l),b=a(177);const y={topic:"ALL"};function v(e,t,r,n,o,c,a){try{var i=e[c](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class g extends e.DataSourceApi{query(t){const r=t.targets.map((t=>{const r=f()(t,y);return new b.Observable((t=>{const n=new e.CircularDataFrame({append:"tail",capacity:1e3});if(n.refId=r.refId,n.addField({name:"time",type:e.FieldType.time}),n.addField({name:"value",type:e.FieldType.number}),void 0===this.connection){this.connection=new WebSocket(this.serverURL||"");const e=this;this.connection.addEventListener("open",(t=>{var n;null===(n=e.connection)||void 0===n||n.send("subscribe:"+r.topic),console.log("subscribe to "+r.topic)})),this.connection.onerror=e=>{console.log(`WebSocket error: ${JSON.stringify(e)}`)}}this.connection.onmessage=o=>{const{message:c}=JSON.parse(o.data);console.log(o.data);const a=c.value,i=(new Date).getTime();n.add({time:i,value:a}),t.next({data:[n],key:r.refId,state:e.LoadingState.Streaming})}}))}));return(0,b.merge)(...r)}testDatasource(){return(e=function*(){return{status:"success",message:"Success"}},function(){var t=this,r=arguments;return new Promise((function(n,o){var c=e.apply(t,r);function a(e){v(c,n,o,a,i,"next",e)}function i(e){v(c,n,o,a,i,"throw",e)}a(void 0)}))})();var e}filterQuery(e){return!e.hide}constructor(e){super(e),d(this,"serverURL",void 0),d(this,"topic",void 0),d(this,"connection",void 0),this.serverURL=e.jsonData.url||"ws://localhost:8080"}}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){j(e,t,r[t])}))}return e}function O(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const{FormField:x}=t.LegacyForms;class m extends r.PureComponent{render(){const e=f()(this.props.query,y),{queryText:r,topic:o}=e;return n().createElement(t.HorizontalGroup,null,n().createElement(x,{width:4,value:o,onChange:this.onTopicChange,label:"Topic",type:"string"}),n().createElement(x,{labelWidth:8,value:r||"",onChange:this.onQueryTextChange,label:"Query Text",tooltip:"Not used yet"}))}constructor(...e){super(...e),j(this,"onQueryTextChange",(e=>{const{onChange:t,query:r}=this.props;t(O(h({},r),{queryText:e.target.value}))})),j(this,"onTopicChange",(e=>{const{onChange:t,query:r,onRunQuery:n}=this.props;t(O(h({},r),{topic:e.target.value})),n()}))}}const w=new e.DataSourcePlugin(g).setConfigEditor(p).setQueryEditor(m)})(),i})()));
//# sourceMappingURL=module.js.map
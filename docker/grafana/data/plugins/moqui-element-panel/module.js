define(["@grafana/data","@grafana/ui","react"],((e,t,n)=>(()=>{"use strict";var l={305:t=>{t.exports=e},388:e=>{e.exports=t},650:e=>{e.exports=n}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return l[e](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{a.r(i),a.d(i,{plugin:()=>h});var e=a(305),t=a(388),n=a(650),l=a.n(n);function r(e,t,n,l,r,a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(l,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(l,a){var i=e.apply(t,n);function o(e){r(i,l,a,o,u,"next",e)}function u(e){r(i,l,a,o,u,"throw",e)}o(void 0)}))}}function u(e,t,n){return c.apply(this,arguments)}function c(){return(c=o((function*(e,t,n){const l=n(e.url||"");console.log(l);let r=n("$api_key"),a=n("$host_port"),i=n("$deviceId");$.ajax({type:"GET",url:a+e.url+"?value="+t+"&deviceId="+i,headers:{api_key:r},success:function(e){console.log("done")},error:function(e){console.log("Error")}})}))).apply(this,arguments)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},l=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),l.forEach((function(t){d(e,t,n[t])}))}return e}const p=({buttons:e,onChange:n})=>{const[r,a]=l().useState(e.map((e=>!1))),[i,o]=l().useState(e),u=(e,t)=>{let n=s({},i[e]);o([...i.slice(0,e),{text:t.text||n.text,url:t.url||n.url,variant:t.variant||n.variant},...i.slice(e+1)])};return l().createElement(l().Fragment,null,i.map(((o,c)=>l().createElement(t.Collapse,{key:c,label:"Button "+(c+1).toString(),isOpen:r[c],collapsible:!0,onToggle:()=>{a((e=>[...e.slice(0,c),!e[c],...e.slice(c+1)]))}},l().createElement(t.Field,{label:"Text",description:"Text to be displayed on the button"},l().createElement(t.Input,{id:"t-"+c.toString(),value:o.text,placeholder:"Button",onChange:e=>u(c,{text:e.target.value})})),l().createElement(t.Field,{label:"Url",description:"Url to call on click"},l().createElement(t.TextArea,{id:"q-"+c.toString(),value:o.url,placeholder:"http://...",rows:5,onChange:e=>u(c,{url:e.target.value})})),l().createElement(t.Field,{label:"Color",description:"Color of the button"},l().createElement(t.RadioButtonGroup,{options:[{label:"Primary",value:"primary"},{label:"Secondary",value:"secondary"},{label:"Destructive",value:"destructive"},{label:"Link",value:"link"}],value:o.variant||"primary",fullWidth:!0,onChange:e=>u(c,{variant:e})})),l().createElement(t.Field,null,l().createElement(l().Fragment,null,l().createElement(t.Button,{icon:"trash-alt",variant:"destructive",onClick:()=>n([...e.slice(0,c),...e.slice(c+1)])},"Delete"),l().createElement(t.Button,{icon:"save",variant:"primary",onClick:()=>n(i)},"Apply")))))),l().createElement(t.Field,null,l().createElement(t.Button,{variant:"secondary",icon:"plus",size:"sm",onClick:()=>{n([...e,{text:"",url:""}])}},"Add Button")))},m=({sliders:e,onChange:n})=>{const[r,a]=l().useState(e.map((e=>!1))),[i,o]=l().useState(e),u=(e,t)=>{let n=s({},i[e]);o([...i.slice(0,e),{text:t.text||n.text,url:t.url||n.url,min:t.min||n.min,max:t.max||n.max,orientation:t.orientation||n.orientation,width:t.width||n.width,height:t.height||n.height,currentValue:void 0},...i.slice(e+1)])};return l().createElement(l().Fragment,null,i.map(((o,c)=>l().createElement(t.Collapse,{key:c,label:"Slider "+(c+1).toString(),isOpen:r[c],collapsible:!0,onToggle:()=>{a((e=>[...e.slice(0,c),!e[c],...e.slice(c+1)]))}},l().createElement(t.Field,{label:"Text",description:"Text to be displayed on the Slider"},l().createElement(t.Input,{id:"t-"+c.toString(),value:o.text,placeholder:"Slider name",onChange:e=>u(c,{text:e.target.value})})),l().createElement(t.Field,{label:"Width",description:"Width of the Slider"},l().createElement(t.Input,{id:"w-"+c.toString(),value:o.width,placeholder:"100px",onChange:e=>u(c,{width:e.target.value})})),l().createElement(t.Field,{label:"Height",description:"Height of the Slider"},l().createElement(t.Input,{id:"h-"+c.toString(),value:o.height,placeholder:"200px",onChange:e=>u(c,{height:e.target.value})})),l().createElement(t.Field,{label:"Min value",description:"Min value of the Slider"},l().createElement(t.Input,{id:"mv-"+c.toString(),value:o.min,placeholder:"0",onChange:e=>u(c,{min:Number(e.target.value)})})),l().createElement(t.Field,{label:"Max value",description:"Max value of the Slider"},l().createElement(t.Input,{id:"Mv-"+c.toString(),value:o.max,placeholder:"100",onChange:e=>u(c,{max:Number(e.target.value)})})),l().createElement(t.Field,{label:"Url",description:"Url to call on click"},l().createElement(t.TextArea,{id:"u-"+c.toString(),value:o.url,placeholder:"http://...",rows:5,onChange:e=>u(c,{url:e.target.value})})),l().createElement(t.Field,null,l().createElement(l().Fragment,null,l().createElement(t.Button,{icon:"trash-alt",variant:"destructive",onClick:()=>n([...e.slice(0,c),...e.slice(c+1)])},"Delete"),l().createElement(t.Button,{icon:"save",variant:"primary",onClick:()=>n(i)},"Apply")))))),l().createElement(t.Field,null,l().createElement(t.Button,{variant:"secondary",icon:"plus",size:"sm",onClick:()=>{n([...e,{text:"",url:"",min:0,max:100,orientation:"vertical",width:"100px",height:"200px",currentValue:void 0}])}},"Add Slider")))},h=new e.PanelPlugin((({options:e,replaceVariables:r})=>{const[a,i]=l().useState([]),c=e=>e.map(((e,n)=>{const a=e.text||"Button";return l().createElement(t.Button,{key:n,variant:e.variant,onClick:o((function*(){return u(e,e.text,r)}))},a)}));(0,n.useEffect)((()=>{e.sliders.map(((e,t)=>{let n=r("$api_key"),l=r("$host_port"),o=r("$deviceId");$.ajax({type:"GET",url:l+e.url+"?getCurrentValue&deviceId="+o,headers:{api_key:n},success:function(n){console.log(n.deviceId+" "+e.text+" "+n.value),console.log();let l=structuredClone(e);l.currentValue=n.value,a[t]=l,i(a.concat([]))},error:function(t){console.log("Errore nel recupero del valore dello slider dalla query ajax: "+l+e.url+"&getCurrentValue")}})}))}),[]);const d=(e,n,a)=>n.map(((n,i)=>{const c=n.text||"Slider",d=void 0!==e[i]?e[i].currentValue:void 0;return l().createElement("div",{key:i,style:{height:n.height?n.height:"300px",width:n.width?n.width:"300px"}},l().createElement("span",null,l().createElement("span",{style:{textAlign:"center",width:"100%",display:"block",paddingLeft:"11px"}}," ",c," "),void 0!==d&&l().createElement(t.Slider,{included:!0,key:i,onChange:(s=o((function*(e){return u(n,e,r)})),function(e){return s.apply(this,arguments)}),orientation:a,value:d,step:.1,min:n.min?n.min:0,max:n.max?n.max:100})));var s}));return"vertical"===e.orientation&&l().createElement(t.VerticalGroup,{justify:"center",align:"center"},e.buttons.length>0?c(e.buttons):d(a,e.sliders,"horizontal"))||l().createElement(t.HorizontalGroup,{justify:"center",align:"center"},e.buttons.length>0?c(e.buttons):d(a,e.sliders,"vertical,"))}));h.setPanelOptions((e=>function(e){e.addRadio({path:"orientation",name:"Orientation",description:"Stacking direction in case of multiple buttons",defaultValue:"horizontal",settings:{options:[{value:"horizontal",label:"Horizontal"},{value:"vertical",label:"Vertical"}]}}).addCustomEditor({id:"buttons",path:"buttons",name:"Button Configuration",defaultValue:[{text:"",url:""}],editor:e=>l().createElement(p,{buttons:e.value,onChange:e.onChange})}).addCustomEditor({id:"sliders",path:"sliders",name:"Slider Configuration",defaultValue:[{text:"",url:"",min:0,max:100,orientation:"vertical",width:"100px",height:"200px"}],editor:e=>l().createElement(m,{sliders:e.value,onChange:e.onChange})})}(e)))})(),i})()));
//# sourceMappingURL=module.js.map